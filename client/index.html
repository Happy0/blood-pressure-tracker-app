<html>
    <script>


        navigator.mediaDevices
            .getUserMedia({video: true, audio: false})
            .then((localMediaStream) => {
                const video = document.querySelector("video");
                video.srcObject = localMediaStream;

                const mediaStream = localMediaStream.getVideoTracks()[0]

                setInterval(() => {
                    imageCapture = new ImageCapture(mediaStream);

                    const result = imageCapture.takePhoto()
                        //.then(r => r.arrayBuffer())
                        .then(r => {
                        const formData = new FormData();
                        formData.append("image", r, "testaroonie.png")

                        console.log(formData)

                        fetch("/run-ocr", {
                            method: 'POST',
                            body: formData
                        }).then(resp => resp.json())
                        .then(resp => console.log(resp))

                    })
                }, 1000)



                
            })
    </script>
    <body>
        <video autoplay></video>
        <canvas></canvas>
    </body>

</html>